---
title: 运算符
date: 2019-04-26 10:36:06
---

## 原码、反码、补码
> 计算机中的符号数有三种表示方法，即原码、反码和补码。三种表示方法均有符号位和数值位两部分，符号位都是用0表示“正”，用1表示“负”，而数值位，三种表示方法各不相同。在二进制中存在 +0 和 -0 , -0 的表达形式比较特殊（四位字节的 32 位 都为0）， 为了方便计算机二级制的加减运算才衍生出这些编码， 可以参考 [传送门](https://www.cnblogs.com/author/p/8954127.html) 理解。

==负数使用原码的补码来存储==，要计算该数值时需要将其转成原码 ， 如 1111 0111 先转成反码 1111 0110 在转成原码 1000 1001 。

了解反码、补码之间的转换规则，只需要记住以下几个规则。
1. 反码：正数的反码与其原码相同；负数的反码是对其原码逐位取反，但符号位除外；
2. 补码: 补码正是基于反码的“-0”问题诞生的； 正数的补码（包含 +0）就是原码； 负数的补码是其反码在加上1；
```
A ： 0000 0001
A的反码 ： 0000 0001
A的补码 ： 0000 0001

B ： 1000 0001
B的反码 ： 1111 1110
B的补码 ： 1111 1111
```


## C 语言

C 语言中运算符分为：算术运算符、关系运算符、逻辑运算符、位运算符、赋值运算符、杂项运算符。

- 算术运算符 : + - \* / % ++ -- ;
- 关系运算符 : == != > < >= <= ;
- 逻辑运算符 : && || ! ;
- 位运算符 : & | ^ ~(取反) << >> ;
- 赋值运算符 : = += -= \*= /= %= <<= >>= &= ^= |= ;
- 杂项运算符 :
  | 运算符 | 描述 |
  | sizeof() | 返回变量大小（字节长度） |
  | & | 返回变量地址， &a 返回 a 的内存地址 |
  | \* | 指针 |
  | ?: | 三元表达式 |

<!-- TODO: 未完: 补码 反码 异或概念 -->


| 运算符 | 描述                                    |
| ------ | --------------------------------------- |
| &      | 两位数都为 1 则为 1，否则为 0           |
| \|     | 两位只要有一个为 1 则为 1，否则为 0     |
| ^      | 异或， 两位只有一个 1 则为 1 ，否则为 0 |
| <<     |                                         |

```
//将二进制整体左移 n 位。
A = 0011 1100
A <<2 = 1111 0000
```

### C 中的运算符优先级

| 类别       | 运算符                              | 结合性   |
| ---------- | ----------------------------------- | -------- |
| 后缀       | () [] -> . ++ - -                   | 从左到右 |
| 一元       | + - ! ~ ++ - - (type)\* & sizeof    | 从右到左 |
| 乘除       | \* / %                              | 从左到右 |
| 加减       | + -                                 | 从左到右 |
| 移位       | << >>                               | 从左到右 |
| 关系       | < <= > >=                           | 从左到右 |
| 相等       | == !=                               | 从左到右 |
| 位与 AND   | &                                   | 从左到右 |
| 位异或 XOR | ^                                   | 从左到右 |
| 位或 OR    | \|                                  | 从左到右 |
| 逻辑与 AND | &&                                  | 从左到右 |
| 逻辑或 OR  | \| \|                               | 从左到右 |
| 条件       | ?:                                  | 从右到左 |
| 赋值       | = += -= \*= /= %=>>= <<= &= ^= \| = | 从右到左 |
| 逗号       | ,                                   | 从左到右 |

## js

==所有的按位操作符的操作数都会被转成补码形式的有符号 32 位整数。==

- 算术运算符 : + - \* / % ++ -- - + \*\*(n次方) ;
- 赋值运算符 ：= += -= *= /= %= **= <<= >>= >>>= &= ^= |= ; 此处需要注意 >> 与 >>>(无符号右移) 的区别。
- 按位操作符 ： & | ^ ~(取反) << >> >>> ;
```
// >> 右移操作会保留符号位，拷贝左侧的值填充，所以正负不会被改变 
9 >> 2 = 2
//0000 1001 => 0000 0010

-9 >> 2 = -3
// 1111 1111 1111 0111 =>1111 1111 1111 1101

// >>> 无符号右移符号也会随着右移，使用 0 填充 ，所以最终结果总是为正数
//正数的结果与 >> 一致
9 >>> 2 = 2 

-9 >>> 2 = 1073741821
//1111 1111 1111 0111 => 0011 1111 1111 1101 
```
- 逗号操作符 ： , 从左至右返回最后一个值。如 (3,4) == 4 ;
- 比较操作符 : == != === !== > < >= <= ; 使用比较运算符(==)时，会将两个操作数转换成==相同的类型== ，使用关系运算符(如 >=)时，会先将操作数转为==原始值==，使它们类型相同，再进行比较运算。字符串比较则是使用基于标准字典的 Unicode 值来进行比较的。

- 条件运算符 : ?：
- 圆括号运算符 : () ; 用于控制运算的优先级；
- 逻辑运算符 ： && || ！； 会被转成false的表达式有 ： null ; NaN ; 0 ; 空字符串("") ; undefined ;
- void 运算符 : 对给定的表达式进行求值，然后返回 undefined。
- 其他运算符和操作符 ： typeof this super delete ...

### 优先级
()的优先级最高，然后是 .(成员访问) new  等， 详细的列表可以参考[MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Operator_Precedence#Table);

```
var a = {n:1};
var b = a;
a.x = a = {n:2};
console.log(a.x);
console.log(b.x);
```


## 对比
从上面的内容可以看出 C 和 js 的运算符中 算术运算符、关系运算符、逻辑运算符、位运算符、赋值运算符 基本差不多， js中多出了 >>> >>>= ** 运算符 ， 其他杂项运算符两种语言扩展的都不一样，相对而言 js 中的操作符更加丰富。
